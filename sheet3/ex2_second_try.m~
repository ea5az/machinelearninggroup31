clear all; close all;
load('points.mat');

C = cell([200,1]);
n = length(pts);
for i = 1:n
    C{i} = pts(i,:);
end
%calculate complete distance matrix once
distances = pdist2(pts,pts);
distances(distances==0)=Inf;
for i= 1000:-1:5
    display(i)
    %get smallest distance
    [~,ind] = min(distances(:));
    [xentr,yentr] = ind2sub([n,n],ind);
    C{min(xentr,yentr)} = [C{xentr},C{yentr}];
    C{max(xentr,yentr)} = [];

    %%% patching the matrix up for the next step
    distances(min(xentr,yentr),:) = min([distances(xentr,:);distances(yentr,:)]);
    distances(:,min(xentr,yentr)) = min([distances(xentr,:);distances(yentr,:)]);
    distances(min(xentr,yentr),min(xentr,yentr)) = Inf;
    for i = 1:length(C{min(xentr)})
        distances(xentr,yentr) = Inf;
        distances(yentr,xentr) = Inf;       
    end

    distances(max(xentr,yentr),:) = Inf([200,1]);
    distances(:,min(xentr,yentr)) = Inf([200,1]);
end
C


%high = max([distances(xentr,:);distances(yentr,:)])

